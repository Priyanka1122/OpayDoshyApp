{"version":3,"file":"styled-native-components.esm.js","sources":["../src/attribute-sets.ts","../src/theme.tsx","../src/make-styles.tsx","../src/attribute-hooks.ts","../src/prop-sets.ts","../src/index.ts"],"sourcesContent":["export const colorAttributes = new Set([\n  'backgroundColor',\n  'color',\n  'borderRightColor',\n  'borderBottomColor',\n  'borderColor',\n  'borderEndColor',\n  'borderLeftColor',\n  'backgroundColor',\n  'borderStartColor',\n  'borderTopColor',\n  'shadowColor',\n  'textDecorationColor',\n]);\n\nexport const lengthAttributes = new Set([\n  'width',\n  'height',\n  'borderBottomEndRadius',\n  'borderBottomLeftRadius',\n  'borderBottomRightRadius',\n  'borderBottomStartRadius',\n  'borderBottomWidth',\n  'borderLeftWidth',\n  'borderRadius',\n  'borderRightWidth',\n  'borderTopEndRadius',\n  'borderTopLeftRadius',\n  'borderTopRightRadius',\n  'borderTopStartRadius',\n  'borderTopWidth',\n  'borderWidth',\n  'flexBasis',\n  'bottom',\n  'end',\n  'left',\n  'right',\n  'start',\n  'top',\n  'margin',\n  'marginBottom',\n  'marginEnd',\n  'marginHorizontal',\n  'marginLeft',\n  'marginRight',\n  'marginStart',\n  'marginTop',\n  'marginVertical',\n  'maxHeight',\n  'maxWidth',\n  'minHeight',\n  'minWidth',\n  'padding',\n  'paddingBottom',\n  'paddingEnd',\n  'paddingHorizontal',\n  'paddingLeft',\n  'paddingRight',\n  'paddingStart',\n  'paddingTop',\n  'paddingVertical',\n  'shadowOffset',\n  'shadowRadius',\n  'lineHeight',\n  'fontSize',\n  'letterSpacing',\n]);\n","import React, { createContext, useContext } from 'react';\nimport { Platform } from 'react-native';\n\nimport type { ReactNode, ComponentType } from 'react';\nimport type { ScaledSize } from 'react-native';\nimport type { Style } from 'css-to-react-native';\n\nimport { colorAttributes, lengthAttributes } from './attribute-sets';\n\nexport interface ThemeInterface {\n  rem: number;\n  elevation: (value: number) => Style;\n}\n\n/**\n * This interface can be augmented by users to add types to `styled-components`' default theme\n * without needing to reexport `ThemedStyledComponentsModule`.\n */\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface Theme extends ThemeInterface {}\n\nexport let ThemeContext = createContext(null) as React.Context<Theme | null>;\n\nexport const setThemeContext = (ExternalThemeContext: React.Context<Theme | null>) => {\n  ThemeContext = ExternalThemeContext;\n};\n\nexport const useTheme = (): Theme => {\n  const theme = useContext(ThemeContext);\n  if (!theme) throw new Error('missing theme context, wrap your app in a ThemeProvider');\n  return theme;\n};\n\nexport const withTheme = <P extends { children?: ReactNode }>(\n  Component: ComponentType<P & { theme: Theme }>\n): ComponentType<P> => {\n  const ComponentWithTheme = (props: P) => {\n    const theme = useTheme();\n    return (\n      <Component {...props} theme={theme}>\n        {props.children || null}\n      </Component>\n    );\n  };\n  ComponentWithTheme.displayName = `WithTheme(${Component.displayName || Component.name})`;\n  return ComponentWithTheme;\n};\n\nexport const ThemeProvider = ({\n  theme,\n  children,\n  rootCss,\n  rootFont = '-apple-system, Roboto, sans-serif',\n  rootBackgroundColor = 'white',\n  disableOutlines = true,\n}: {\n  theme: Theme;\n  children: ReactNode;\n  rootCss?: string;\n  rootFont?: string;\n  rootBackgroundColor?: string;\n  disableOutlines?: boolean;\n}) => {\n  // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n  // @ts-ignore cannot add colors to ThemeInterface because we don't want to restrict it\n  const colors = theme.colors as Record<string, string>;\n  const backgroundColor =\n    rootBackgroundColor.substring(0, 1) === '$'\n      ? colors[rootBackgroundColor.substring(1)]\n      : rootBackgroundColor;\n  return (\n    <ThemeContext.Provider value={theme}>\n      <>\n        {Platform.OS === 'web' ? (\n          <style\n            // eslint-disable-next-line react-perf/jsx-no-new-object-as-prop\n            dangerouslySetInnerHTML={{\n              __html: `\n                html, body, #root {\n                  font-family: ${rootFont};\n                  min-height: 100%;\n                  background: ${backgroundColor};\n                  font-size: ${theme.rem}px;\n                }\n                #root { display: flex; }\n                ${disableOutlines ? 'textarea, select, input { outline: none; }' : ''}\n                ${rootCss || ''}\n              `,\n            }}\n            key=\"global_style\"\n          />\n        ) : null}\n        {children}\n      </>\n    </ThemeContext.Provider>\n  );\n};\n\n// css-to-react-native only supports proper css color values, so we resolve color variables to transparent hex values when compiling the template strings and then transform them back and dynamically resolve them from the theme when rendering\nlet currentColorId = 1;\nconst themeColors = {\n  hexForVarName: new Map<string, string>([]),\n  nameForHex: new Map<string, string>([]),\n};\nexport const resolveColorVariablePlaceholder = (variableName: string): string => {\n  if (!themeColors.hexForVarName.has(variableName)) {\n    const hexPlaceholder = `#${(currentColorId++).toString(16).padStart(6, '0').toUpperCase()}00`;\n    themeColors.hexForVarName.set(variableName, hexPlaceholder);\n    themeColors.nameForHex.set(hexPlaceholder, variableName.substring(1));\n  }\n  return themeColors.hexForVarName.get(variableName)!;\n};\n\n// resolve any occurences of theme variables in the values of a style object\nconst plattformIsWeb = Platform.OS === 'web';\n\nexport const resolveLengthUnit = (\n  str: string | number | undefined,\n  theme: Theme,\n  windowDimensions: ScaledSize\n): number | string | undefined => {\n  if (!str || typeof str === 'number') return str;\n  if (typeof str !== 'string') throw new Error(`expected ${str} to be a string`);\n  const value = Number.parseFloat(str);\n  if (value === 0) return 0;\n  const unit = str.trim().replace(String(value), '');\n  if (!unit) throw new Error(`length string '${str}' contains no unit`);\n  switch (unit) {\n    case 'rem':\n      return value * theme.rem;\n    case 'px':\n      return value;\n    case '%':\n      return str;\n    case 'vw':\n      return (value * windowDimensions.width) / 100;\n    case 'vh':\n      return (value * windowDimensions.height) / 100;\n    default:\n      throw new Error(`cannot parse length string '${str}', unknown unit '${unit}'`);\n  }\n};\n\nexport const resolveThemeVariables = (\n  styleObject: { [key: string]: any },\n  theme: Theme,\n  windowDimensions: ScaledSize\n) => {\n  for (const key in styleObject) {\n    if (key === 'elevation' && theme.elevation) {\n      const shadowStyleObject = theme.elevation(styleObject[key] as number);\n      for (const shadowKey in shadowStyleObject) {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore typescript doesn't understand that we are assigning the same keys here\n        styleObject[shadowKey] = shadowStyleObject[shadowKey];\n      }\n    }\n    if (key === 'cursor' && !plattformIsWeb) delete styleObject.cursor;\n    // resolve all color names to theme variables if possible\n    if (colorAttributes.has(key)) {\n      const colorName = themeColors.nameForHex.get(styleObject[key]);\n      if (colorName) {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore cannot add colors to ThemeInterface because we don't want to restrict it\n        const colors = theme.colors as Record<string, string>;\n        if (colorName in colors) {\n          styleObject[key] = colors[colorName];\n        } else {\n          throw new Error(`the color variable '$${colorName}' has not been defined in the theme.`);\n        }\n      }\n    }\n    // resolve all rem and viewport units unless on web where they are supported natively\n    if (!plattformIsWeb && lengthAttributes.has(key) && typeof styleObject[key] === 'string') {\n      styleObject[key] = resolveLengthUnit(styleObject[key], theme, windowDimensions);\n    }\n  }\n  return styleObject;\n};\n","import React, { useMemo, forwardRef, memo } from 'react';\nimport { StyleSheet, useWindowDimensions } from 'react-native';\nimport { getPropertyName, getStylesForProperty } from 'css-to-react-native';\n\nimport {\n  resolveColorVariablePlaceholder,\n  resolveThemeVariables,\n  resolveLengthUnit,\n  useTheme,\n} from './theme';\n\nimport type { ForwardRefRenderFunction, ReactNode, ComponentType } from 'react';\nimport type { StyleProp, ScaledSize } from 'react-native';\nimport type { Style } from 'css-to-react-native';\nimport type { Theme } from './theme';\n\n// resolve css template literal content into a single string, allow for props functions\nconst cssCommentRegexp = new RegExp('\\\\/\\\\*[^]+?\\\\*\\\\/', 'g');\nconst resolveTemplateLiteral: {\n  (strings: TemplateStringsArray, expressions: string[]): string;\n  <P>(\n    strings: TemplateStringsArray,\n    expressions: (string | number | ((props: P) => string | number))[],\n    props: P\n  ): string;\n} = (\n  strings: TemplateStringsArray,\n  expressions: (string | number | ((props: any) => string | number))[],\n  props?: any\n) =>\n  strings\n    .map((str, i) => {\n      // resolve expressions\n      const exp = expressions.length > i ? expressions[i] : '';\n      if (typeof exp === 'string' || typeof exp === 'number') {\n        return str + exp;\n      } else {\n        return str + exp(props);\n      }\n    })\n    .join('')\n    // remove comments\n    .replace(cssCommentRegexp, '');\n\n// create a RN style object from a single css declaration\nconst variableRegexp = new RegExp('\\\\$[\\\\w|-]+', 'g');\nconst styleObjectCache = new Map<string, Style>([]);\nconst createStyleObject = (cssDeclaration?: string): Style => {\n  if (!cssDeclaration) return {};\n  let styleObject = styleObjectCache.get(cssDeclaration);\n  if (!styleObject) {\n    styleObject = Object.assign(\n      {},\n      ...cssDeclaration\n        .split(';')\n        .map((rule) =>\n          rule\n            .split(':')\n            .map((value) => value && value.trim())\n            .filter((value) => value)\n        )\n        .filter((rule) => rule.length === 2)\n        .map(([name, value]) => {\n          const resolvedValue = value.replace(variableRegexp, (variable: string): string =>\n            resolveColorVariablePlaceholder(variable)\n          );\n          try {\n            return getStylesForProperty(getPropertyName(name), resolvedValue);\n          } catch (e) {\n            throw new Error(`could not parse '${name}: ${value}'\\n${e.message}`);\n          }\n        })\n    ) as Style;\n    styleObjectCache.set(cssDeclaration, styleObject);\n  }\n  return styleObject;\n};\n\ntype NestedStyles = { [nestedStyle: string]: { main: Style; [mediaRule: string]: Style } };\nconst nestedStyleObjectsCache = new Map<string, NestedStyles>([]);\n// create an object of RN style objects for each media query from a single css declaration\nexport const createNestedStyleObject = (cssDeclaration: string): NestedStyles => {\n  let nestedStyleObject = nestedStyleObjectsCache.get(cssDeclaration);\n  if (!nestedStyleObject) {\n    nestedStyleObject = { style: { main: {} } };\n    let match: RegExpExecArray | null;\n    let start = 0;\n    let name: string;\n    let nOpen = 0;\n    let mainDeclaration = '';\n    const braceRegExp = new RegExp('\\\\s*.+\\\\s*\\\\{|\\\\}', 'g');\n    while ((match = braceRegExp.exec(cssDeclaration))) {\n      if (nOpen === 0) {\n        mainDeclaration += cssDeclaration.substring(start, match.index);\n        start = match.index + match[0].length;\n        name = cssDeclaration.substring(match.index, match.index + match[0].length - 1).trim();\n      }\n      nOpen = nOpen + (match[0] === '}' ? -1 : +1);\n      if (nOpen === 0) {\n        const declaration = cssDeclaration.substring(start, match.index).trim();\n        start = match.index + 1;\n        if (name!.substring(0, 6) === '@media') {\n          nestedStyleObject.style[name!.substring(6).trim()] = createStyleObject(declaration);\n        } else {\n          nestedStyleObject[name! + 'Style'] = createNestedStyleObject(declaration).style;\n        }\n      }\n    }\n    mainDeclaration += cssDeclaration.substring(start, cssDeclaration.length);\n    nestedStyleObject.style.main = createStyleObject(mainDeclaration.trim());\n    nestedStyleObjectsCache.set(cssDeclaration, nestedStyleObject);\n  }\n  return nestedStyleObject;\n};\n\nconst matchMediaRule = (mediaRule: string, theme: Theme, windowDimensions: ScaledSize): boolean => {\n  let matched = true;\n  for (const condition of mediaRule.split('and')) {\n    const [name, strVal] = condition.replace(/\\(|\\)/g, '').trim().split(':');\n    const value = resolveLengthUnit(strVal, theme, windowDimensions);\n    if (typeof value !== 'number') throw new Error(`invalid unit on @media ${mediaRule}`);\n    const { width, height } = windowDimensions;\n    switch (name) {\n      case 'min-width':\n        matched = matched && width >= value;\n        break;\n      case 'max-width':\n        matched = matched && width <= value;\n        break;\n      case 'min-height':\n        matched = matched && height >= value;\n        break;\n      case 'max-height':\n        matched = matched && height <= value;\n        break;\n    }\n    // console.log('matching', condition, value, windowDimensions, matched);\n  }\n  return matched;\n};\n\n// generate styleSheet from nested style Object with media queries\nconst useStyleSheet = (\n  styles: NestedStyles,\n  theme: Theme,\n  windowDimensions: ScaledSize\n): { [key: string]: Style } => {\n  return useMemo(() => {\n    const finalStyles: { [key: string]: Style } = {};\n    // we need to make sure to do a deep clone here, so that theme and viewport units can be resolved from original strings\n    const stylesCopy = { ...styles };\n    for (const key in stylesCopy) {\n      const { main, ...mediaStylesCopy } = stylesCopy[key];\n      // this will contain the main style and all applicapble media query styles\n      const mediaStylesArray = [resolveThemeVariables({ ...main }, theme, windowDimensions)];\n      for (const mediaRule in mediaStylesCopy) {\n        if (matchMediaRule(mediaRule, theme, windowDimensions)) {\n          mediaStylesArray.push(\n            resolveThemeVariables({ ...mediaStylesCopy[mediaRule] }, theme, windowDimensions)\n          );\n        }\n      }\n      finalStyles[key] = Object.assign({}, ...mediaStylesArray);\n    }\n    return StyleSheet.create(finalStyles);\n  }, [styles, theme, windowDimensions]);\n};\n\nexport type OptionalKeys<T> = Exclude<\n  { [K in keyof T]: T extends Record<K, T[K]> ? never : K }[keyof T],\n  undefined\n>;\nexport type RequiredKeys<T> = Exclude<keyof T, OptionalKeys<T>>;\ntype TemplateStringExpression<P> = string | number | ((props: P) => string | number);\nexport type TemplateFunction<I, P, A = {}> = (\n  strings: TemplateStringsArray,\n  ...expressions: TemplateStringExpression<\n    Omit<P & I, RequiredKeys<A> | 'children' | 'style'> & { theme: Theme } & A\n  >[]\n) => ComponentType<Omit<P & I, RequiredKeys<A>>>;\nexport type AttrProps<P, I, A> = Omit<P & I, RequiredKeys<A> | 'children' | 'style'> & {\n  theme: Theme;\n};\n\nexport const makeTemplateFunction = <\n  I extends { style?: StyleProp<any>; children?: ReactNode },\n  P = {},\n  A extends { children?: never; style?: never } = {}\n>(\n  Component: ComponentType<I>,\n  transformProps: (p: AttrProps<P, I, A>) => AttrProps<P, I, A> & A,\n  filterComponentProps: (props: any) => I\n): TemplateFunction<I, P, A> => (\n  strings: TemplateStringsArray,\n  ...expressions: TemplateStringExpression<AttrProps<P, I, A> & A>[]\n): ComponentType<Omit<P & I, RequiredKeys<A>>> => {\n  const displayName = `Styled(${Component.displayName || Component.name})`;\n  let StyledForwardRefRenderFunction: ForwardRefRenderFunction<any, Omit<P & I, RequiredKeys<A>>>;\n  if (expressions.every((exp) => typeof exp === 'string')) {\n    // if no props are used in the styles, then we can statically generate the cssString\n    const cssString = resolveTemplateLiteral(strings, expressions as string[]);\n    const styles = createNestedStyleObject(cssString);\n    StyledForwardRefRenderFunction = (\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore ts doesn't understand that A is not allwoed to declar children and style\n      { children, style, ...props }: Omit<P & I, RequiredKeys<A>>,\n      ref\n    ) => {\n      const theme = useTheme();\n      const dimensions = useWindowDimensions();\n      let styleProps: { [key: string]: Style | Style[] } = useStyleSheet(styles, theme, dimensions);\n      styleProps = style ? { ...styleProps, style: [styleProps.style, style] } : styleProps;\n      const transformedProps = transformProps({ ...props, theme } as AttrProps<P, I, A>);\n      return (\n        <Component {...filterComponentProps(transformedProps)} {...styleProps} ref={ref}>\n          {children}\n        </Component>\n      );\n    };\n  } else {\n    // if the cssString depends on props, we can at least ignore changes to children\n    StyledForwardRefRenderFunction = (\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore ts doesn't understand that A is not allwoed to declar children and style\n      { children, style, ...props }: Omit<P & I, RequiredKeys<A>>,\n      ref\n    ) => {\n      const theme = useTheme();\n      const dimensions = useWindowDimensions();\n      const transformedProps = transformProps({ ...props, theme } as AttrProps<P, I, A>);\n      const cssString = useMemo(() => {\n        return resolveTemplateLiteral(strings, expressions, transformedProps);\n      }, [transformedProps]);\n      const styles = useMemo(() => createNestedStyleObject(cssString), [cssString]);\n      let styleProps: { [key: string]: Style | Style[] } = useStyleSheet(styles, theme, dimensions);\n      styleProps = style ? { ...styleProps, style: [styleProps.style, style] } : styleProps;\n      return (\n        <Component {...filterComponentProps(transformedProps)} {...styleProps} ref={ref}>\n          {children}\n        </Component>\n      );\n    };\n  }\n  StyledForwardRefRenderFunction.displayName = displayName;\n  // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n  // @ts-ignore ts gets confused in HOC wrappers but the declared return type has the proper refs\n  return memo(forwardRef(StyledForwardRefRenderFunction));\n};\n\nexport const useStyle = (cssDeclaration: string): Style => {\n  const theme = useTheme();\n  const dimensions = useWindowDimensions();\n  const styles = useMemo(() => createNestedStyleObject(cssDeclaration.trim()), []);\n  return useStyleSheet(styles, theme, dimensions).style;\n};\n","import { useMemo } from 'react';\nimport { useWindowDimensions } from 'react-native';\n\nimport { useTheme, resolveLengthUnit } from './theme';\n\nexport const useLengthAttribute = (margin: string): [number, number, number, number] => {\n  const theme = useTheme();\n  const windowDimensions = useWindowDimensions();\n  return useMemo(() => {\n    const parsedMargin = margin.replace(/\\s\\s+/g, ' ').split(' ');\n    const pixelValues = parsedMargin.map((str: string) =>\n      resolveLengthUnit(str, theme, windowDimensions)\n    );\n    return [0, 1, 2, 3].map((i) =>\n      pixelValues[i] !== undefined\n        ? pixelValues[i]\n        : pixelValues[i - 2] !== undefined\n        ? pixelValues[i - 2]\n        : pixelValues[0] || 0\n    ) as [number, number, number, number];\n  }, [margin, theme, windowDimensions]);\n};\n\nexport const useColorAttribute = (color: string): string => {\n  const theme = useTheme();\n  // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n  // @ts-ignore cannot add colors to ThemeInterface because we don't want to restrict it\n  const colors = theme.colors as Record<string, string>;\n  return color in colors\n    ? colors[color]\n    : color && color.substring(1) in colors\n    ? colors[color.substring(1)]\n    : color;\n};\n","import type {\n  ViewProps,\n  TextProps,\n  ImageProps,\n  VirtualizedListProps,\n  TextInputProps,\n  PressableProps,\n  AccessibilityProps,\n  TouchableOpacityProps,\n} from 'react-native';\n\ntype AccessibilityPropName = keyof AccessibilityProps;\nconst accessibilityPropNames = [\n  'accessible',\n  'accessibilityActions',\n  'accessibilityLabel',\n  'accessibilityRole',\n  'accessibilityState',\n  'accessibilityHint',\n  'accessibilityValue',\n  'onAccessibilityAction',\n  'accessibilityComponentType',\n  'accessibilityLiveRegion',\n  'importantForAccessibility',\n  'accessibilityElementsHidden',\n  'accessibilityTraits',\n  'accessibilityViewIsModal',\n  'onAccessibilityEscape',\n  'onAccessibilityTap',\n  'onMagicTap',\n  'accessibilityIgnoresInvertColors',\n] as const;\n// this ensures that we get typescript errors if a key from ViewProps is missing\nconst accessibilityPropNamesWithEnsuredCompleteKeys: readonly typeof accessibilityPropNames[number][] = accessibilityPropNames as readonly AccessibilityPropName[];\n\ntype ViewPropName = keyof ViewProps;\nconst viewPropNames = [\n  'style',\n  ...accessibilityPropNamesWithEnsuredCompleteKeys,\n  'onStartShouldSetResponder',\n  'hitSlop',\n  'nativeID',\n  'onLayout',\n  'onMoveShouldSetResponder',\n  'onMoveShouldSetResponderCapture',\n  'onResponderGrant',\n  'onResponderMove',\n  'onResponderReject',\n  'onResponderRelease',\n  'onResponderTerminate',\n  'onResponderTerminationRequest',\n  'onStartShouldSetResponderCapture',\n  'pointerEvents',\n  'removeClippedSubviews',\n  'testID',\n  'collapsable',\n  'needsOffscreenAlphaCompositing',\n  'renderToHardwareTextureAndroid',\n  'shouldRasterizeIOS',\n  'focusable',\n  'isTVSelectable',\n  'hasTVPreferredFocus',\n  'tvParallaxProperties',\n  'tvParallaxShiftDistanceX',\n  'tvParallaxShiftDistanceY',\n  'tvParallaxTiltAngle',\n  'tvParallaxMagnification',\n  'onResponderEnd',\n  'onResponderStart',\n  'onTouchStart',\n  'onTouchMove',\n  'onTouchEnd',\n  'onTouchCancel',\n  'onTouchEndCapture',\n] as const;\n// this ensures that we get typescript errors if a key from ViewProps is missing\nconst viewPropNamesWithEnsuredCompleteKeys: readonly typeof viewPropNames[number][] = viewPropNames as readonly ViewPropName[];\nexport const viewProps = new Set(viewPropNamesWithEnsuredCompleteKeys);\n\ntype TextPropName = keyof TextProps;\nconst textPropNames = [\n  'style',\n  ...accessibilityPropNamesWithEnsuredCompleteKeys,\n  'selectable',\n  'ellipsizeMode',\n  'nativeID',\n  'numberOfLines',\n  'onLayout',\n  'onLongPress',\n  'onPress',\n  'pressRetentionOffset',\n  'allowFontScaling',\n  'testID',\n  'disabled',\n  'selectionColor',\n  'textBreakStrategy',\n  'adjustsFontSizeToFit',\n  'minimumFontScale',\n  'suppressHighlighting',\n  'pointerEvents',\n  'lineBreakMode',\n  'maxFontSizeMultiplier',\n] as const;\n// this ensures that we get typescript errors if a key from ViewProps is missing\nconst textPropNamesWithEnsuredCompleteKeys: readonly typeof textPropNames[number][] = textPropNames as readonly TextPropName[];\nexport const textProps = new Set(textPropNamesWithEnsuredCompleteKeys);\n\n// we don't want props that may conflict with styles\ntype ImagePropName = Exclude<\n  keyof ImageProps,\n  | 'borderRadius'\n  | 'borderTopLeftRadius'\n  | 'borderTopRightRadius'\n  | 'borderBottomLeftRadius'\n  | 'borderBottomRightRadius'\n  | 'width'\n  | 'height'\n>;\nconst imagePropNames = [\n  'style',\n  ...accessibilityPropNamesWithEnsuredCompleteKeys,\n  'blurRadius',\n  'onLayout',\n  'onLoad',\n  'onLoadEnd',\n  'onLoadStart',\n  'resizeMode',\n  'source',\n  'loadingIndicatorSource',\n  'onError',\n  'testID',\n  'resizeMethod',\n  'capInsets',\n  'defaultSource',\n  'onPartialLoad',\n  'onProgress',\n  'fadeDuration',\n  'pointerEvents',\n  'progressiveRenderingEnabled',\n] as const;\n// this ensures that we get typescript errors if a key from ViewProps is missing\nconst imagePropNamesWithEnsuredCompleteKeys: readonly typeof imagePropNames[number][] = imagePropNames as readonly ImagePropName[];\nexport const imageProps = new Set(imagePropNamesWithEnsuredCompleteKeys);\n\ntype ListPropName = keyof VirtualizedListProps<any>;\nconst listPropNames = [\n  ...viewPropNamesWithEnsuredCompleteKeys,\n  'columnWrapperStyle',\n  'contentContainerStyle',\n  'indicatorStyle',\n  ...accessibilityPropNamesWithEnsuredCompleteKeys,\n  'renderItem',\n  'data',\n  'sections',\n  'ItemSeparatorComponent',\n  'ListEmptyComponent',\n  'ListFooterComponent',\n  'ListHeaderComponent',\n  'extraData',\n  'getItemLayout',\n  'horizontal',\n  'initialNumToRender',\n  'initialScrollIndex',\n  'inverted',\n  'keyExtractor',\n  'numColumns',\n  'onEndReached',\n  'onEndReachedThreshold',\n  'onRefresh',\n  'onViewableItemsChanged',\n  'progressViewOffset',\n  'legacyImplementation',\n  'refreshing',\n  'viewabilityConfig',\n  'viewabilityConfigCallbackPairs',\n  'renderSectionFooter',\n  'renderSectionHeader',\n  'SectionSeparatorComponent',\n  'stickySectionHeadersEnabled',\n  'updateCellsBatchingPeriod',\n  'windowSize',\n  'disableVirtualization',\n  'getItem',\n  'getItemCount',\n  'debug',\n  'CellRendererComponent',\n  'onScrollToIndexFailed',\n  'renderScrollComponent',\n  'maxToRenderPerBatch',\n  'alwaysBounceVertical',\n  'keyboardDismissMode',\n  'keyboardShouldPersistTaps',\n  'onContentSizeChange',\n  'onMomentumScrollBegin',\n  'onMomentumScrollEnd',\n  'onScroll',\n  'onScrollBeginDrag',\n  'onScrollEndDrag',\n  'pagingEnabled',\n  'refreshControl',\n  'scrollEnabled',\n  'showsHorizontalScrollIndicator',\n  'showsVerticalScrollIndicator',\n  'stickyHeaderIndices',\n  'endFillColor',\n  'overScrollMode',\n  'scrollPerfTag',\n  'alwaysBounceHorizontal',\n  'automaticallyAdjustContentInsets',\n  'bounces',\n  'bouncesZoom',\n  'canCancelContentTouches',\n  'centerContent',\n  'contentInset',\n  'contentInsetAdjustmentBehavior',\n  'contentOffset',\n  'decelerationRate',\n  'directionalLockEnabled',\n  'maximumZoomScale',\n  'minimumZoomScale',\n  'pinchGestureEnabled',\n  'scrollEventThrottle',\n  'scrollIndicatorInsets',\n  'scrollsToTop',\n  'snapToAlignment',\n  'snapToInterval',\n  'snapToOffsets',\n  'snapToStart',\n  'snapToEnd',\n  'zoomScale',\n  'nestedScrollEnabled',\n  'listKey',\n  'invertStickyHeaders',\n  'disableIntervalMomentum',\n  'disableScrollViewPanResponder',\n  'onScrollAnimationEnd',\n  'scrollToOverflowEnabled',\n  'onScrollToTop',\n  'fadingEdgeLength',\n  'persistentScrollbar',\n] as const;\n// this ensures that we get typescript errors if a key from ViewProps is missing\nconst listPropNamesWithEnsuredCompleteKeys: readonly typeof listPropNames[number][] = listPropNames as readonly ListPropName[];\nexport const listProps = new Set(listPropNamesWithEnsuredCompleteKeys);\n\ntype InputPropName = keyof TextInputProps;\nconst inputPropNames = [\n  ...viewPropNamesWithEnsuredCompleteKeys,\n  ...accessibilityPropNamesWithEnsuredCompleteKeys,\n  'allowFontScaling',\n  'autoCapitalize',\n  'autoCorrect',\n  'autoFocus',\n  'blurOnSubmit',\n  'caretHidden',\n  'clearButtonMode',\n  'clearTextOnFocus',\n  'contextMenuHidden',\n  'dataDetectorTypes',\n  'defaultValue',\n  'disableFullscreenUI',\n  'editable',\n  'enablesReturnKeyAutomatically',\n  'inlineImageLeft',\n  'inlineImagePadding',\n  'keyboardAppearance',\n  'keyboardType',\n  'maxLength',\n  'multiline',\n  'numberOfLines',\n  'onBlur',\n  'onChange',\n  'onChangeText',\n  'onContentSizeChange',\n  'onEndEditing',\n  'onFocus',\n  'onKeyPress',\n  'onScroll',\n  'onSelectionChange',\n  'onSubmitEditing',\n  'placeholder',\n  'placeholderTextColor',\n  'returnKeyLabel',\n  'returnKeyType',\n  'scrollEnabled',\n  'secureTextEntry',\n  'selection',\n  'selectionColor',\n  'selectionState',\n  'selectTextOnFocus',\n  'spellCheck',\n  'textContentType',\n  'textBreakStrategy',\n  'underlineColorAndroid',\n  'value',\n  'maxFontSizeMultiplier',\n  'onTextInput',\n  'inputAccessoryViewID',\n  'passwordRules',\n  'rejectResponderTermination',\n  'autoCompleteType',\n  'importantForAutofill',\n  'textAlignVertical',\n  'showSoftInputOnFocus',\n] as const;\n// this ensures that we get typescript errors if a key from ViewProps is missing\nconst inputPropNamesWithEnsuredCompleteKeys: readonly typeof inputPropNames[number][] = inputPropNames as readonly InputPropName[];\nexport const inputProps = new Set(inputPropNamesWithEnsuredCompleteKeys);\n\ntype PressablePropName = keyof PressableProps | keyof TouchableOpacityProps;\nconst pressablePropNames = [\n  ...viewPropNamesWithEnsuredCompleteKeys,\n  ...accessibilityPropNamesWithEnsuredCompleteKeys,\n  'delayLongPress',\n  'delayPressIn',\n  'delayPressOut',\n  'disabled',\n  'onBlur',\n  'onFocus',\n  'onLongPress',\n  'onPress',\n  'onPressIn',\n  'onPressOut',\n  'pressRetentionOffset',\n  'activeOpacity',\n  'children',\n  'android_disableSound',\n  'android_ripple',\n  'testOnly_pressed',\n  'touchSoundDisabled',\n] as const;\n// this ensures that we get typescript errors if a key from ViewProps is missing\nconst pressablePropNamesWithEnsuredCompleteKeys: readonly typeof pressablePropNames[number][] = pressablePropNames as readonly PressablePropName[];\nexport const pressableProps = new Set(pressablePropNamesWithEnsuredCompleteKeys);\n\nexport const domProps = new Set([\n  'allowFullScreen',\n  'autoComplete',\n  'autoFocus',\n  'challenge',\n  'charSet',\n  'checked',\n  'className',\n  'content',\n  'contentEditable',\n  'crossOrigin',\n  'data',\n  'disabled',\n  'draggable',\n  'href',\n  'id',\n  'scrolling',\n  'spellCheck',\n  'tabIndex',\n  'target',\n  'type',\n  'wrap',\n  'onCopy',\n  'onCut',\n  'onPaste',\n  'onCompositionEnd',\n  'onCompositionStart',\n  'onCompositionUpdate',\n  'onKeyDown',\n  'onKeyPress',\n  'onKeyUp',\n  'onFocus',\n  'onBlur',\n  'onChange',\n  'onInput',\n  'onInvalid',\n  'onSubmit',\n  'onClick',\n  'onContextMenu',\n  'onDoubleClick',\n  'onDrag',\n  'onDragEnd',\n  'onDragEnter',\n  'onDragExit',\n  'onDragLeave',\n  'onDragOver',\n  'onDragStart',\n  'onDrop',\n  'onMouseDown',\n  'onMouseEnter',\n  'onMouseLeave',\n  'onMouseMove',\n  'onMouseOut',\n  'onMouseOver',\n  'onMouseUp',\n  'onPointerDown',\n  'onPointerMove',\n  'onPointerUp',\n  'onPointerCancel',\n  'onGotPointerCapture',\n  'onLostPointerCapture',\n  'onPointerEnter',\n  'onPointerLeave',\n  'onPointerOver',\n  'onPointerOut',\n  'onSelect',\n  'onTouchCancel',\n  'onTouchEnd',\n  'onTouchMove',\n  'onTouchStart',\n  'onScroll',\n  'onWheel',\n  'onAnimationStart',\n  'onAnimationEnd',\n  'onAnimationIteration',\n  'onTransitionEnd',\n  'onToggle',\n]);\n\nexport const makePropsFilter = <I>(...propsSets: Set<string>[]): ((props: any) => I) => {\n  const allPropsSet = new Set<string>([]);\n  for (const set of propsSets) set.forEach((el) => allPropsSet.add(el));\n\n  return (props: any) => {\n    const propsCopy: any = {};\n    for (const key in props) if (allPropsSet.has(key)) propsCopy[key] = props[key];\n    return propsCopy as I;\n  };\n};\n","import {\n  View,\n  Text,\n  Image,\n  TextInput,\n  ScrollView,\n  FlatList,\n  SectionList,\n  TouchableOpacity,\n  SafeAreaView,\n} from 'react-native';\n\nimport { ThemeProvider, useTheme, withTheme, ThemeContext, setThemeContext } from './theme';\nimport { makeTemplateFunction, useStyle } from './make-styles';\nimport { useLengthAttribute, useColorAttribute } from './attribute-hooks';\nimport {\n  makePropsFilter,\n  viewProps,\n  textProps,\n  imageProps,\n  listProps,\n  pressableProps,\n  inputProps,\n  domProps,\n} from './prop-sets';\n\nimport type { ComponentType } from 'react';\nimport type { Theme, ThemeInterface } from './theme';\nimport type { TemplateFunction, AttrProps } from './make-styles';\n\ninterface StyledInterface<I> {\n  <P>(...args: Parameters<TemplateFunction<I, P>>): ReturnType<TemplateFunction<I, P>>;\n  attrs: <P, A>(attrMaker: A | ((props: AttrProps<P, I, A>) => A)) => TemplateFunction<I, P, A>;\n}\n\nconst styled = <I>(Component: ComponentType<I>, filterComponentProps = (p: any): I => p) => {\n  const templateFunction = makeTemplateFunction<I>(\n    Component,\n    (props) => props,\n    filterComponentProps\n  ) as StyledInterface<I>;\n  // it is impossible to infer the return value of attrMaker, it has to be typed explicitly\n  templateFunction.attrs = <P, A>(attrMaker: A | ((props: AttrProps<P, I, A>) => A)) => {\n    const transformProps = (props: AttrProps<P, I, A>): AttrProps<P, I, A> & A => ({\n      ...props,\n      ...(attrMaker instanceof Function ? attrMaker(props) : attrMaker),\n    });\n    return makeTemplateFunction<I, P, A>(Component, transformProps, filterComponentProps);\n  };\n  return templateFunction;\n};\n\nstyled.View = styled(View, makePropsFilter(viewProps, domProps));\nstyled.Text = styled(Text, makePropsFilter(textProps, domProps));\nstyled.Image = styled(Image, makePropsFilter(imageProps, domProps));\nstyled.ScrollView = styled(ScrollView, makePropsFilter(listProps, domProps));\nstyled.FlatList = styled(FlatList, makePropsFilter(listProps, domProps));\nstyled.SectionList = styled(SectionList, makePropsFilter(listProps, domProps));\nstyled.TouchableOpacity = styled(TouchableOpacity, makePropsFilter(pressableProps, domProps));\nstyled.TextInput = styled(TextInput, makePropsFilter(inputProps, viewProps, textProps, domProps));\nstyled.SafeAreaView = styled(SafeAreaView, makePropsFilter(viewProps, domProps));\n\nexport default styled;\n\nexport const filterProps = makePropsFilter(\n  viewProps,\n  textProps,\n  imageProps,\n  listProps,\n  pressableProps,\n  inputProps,\n  domProps\n);\n\nexport {\n  ThemeProvider,\n  useTheme,\n  useStyle,\n  withTheme,\n  ThemeContext,\n  setThemeContext,\n  useLengthAttribute,\n  useColorAttribute,\n};\n\nexport type { Theme, ThemeInterface };\nexport type { Style } from 'css-to-react-native';\n"],"names":["colorAttributes","Set","lengthAttributes","ThemeContext","createContext","setThemeContext","ExternalThemeContext","useTheme","theme","useContext","Error","withTheme","Component","ComponentWithTheme","props","React","children","displayName","name","ThemeProvider","rootCss","rootFont","rootBackgroundColor","disableOutlines","colors","backgroundColor","substring","Provider","value","Platform","OS","dangerouslySetInnerHTML","__html","rem","key","currentColorId","themeColors","hexForVarName","Map","nameForHex","resolveColorVariablePlaceholder","variableName","has","hexPlaceholder","toString","padStart","toUpperCase","set","get","plattformIsWeb","resolveLengthUnit","str","windowDimensions","Number","parseFloat","unit","trim","replace","String","width","height","resolveThemeVariables","styleObject","elevation","shadowStyleObject","shadowKey","cursor","colorName","cssCommentRegexp","RegExp","resolveTemplateLiteral","strings","expressions","map","i","exp","length","join","variableRegexp","styleObjectCache","createStyleObject","cssDeclaration","Object","assign","split","rule","filter","resolvedValue","variable","getStylesForProperty","getPropertyName","e","message","nestedStyleObjectsCache","createNestedStyleObject","nestedStyleObject","style","main","match","start","nOpen","mainDeclaration","braceRegExp","exec","index","declaration","matchMediaRule","mediaRule","matched","condition","strVal","useStyleSheet","styles","useMemo","finalStyles","stylesCopy","mediaStylesCopy","mediaStylesArray","push","StyleSheet","create","makeTemplateFunction","transformProps","filterComponentProps","StyledForwardRefRenderFunction","every","cssString","ref","dimensions","useWindowDimensions","styleProps","transformedProps","memo","forwardRef","useStyle","useLengthAttribute","margin","parsedMargin","pixelValues","undefined","useColorAttribute","color","accessibilityPropNames","accessibilityPropNamesWithEnsuredCompleteKeys","viewPropNames","viewPropNamesWithEnsuredCompleteKeys","viewProps","textPropNames","textPropNamesWithEnsuredCompleteKeys","textProps","imagePropNames","imagePropNamesWithEnsuredCompleteKeys","imageProps","listPropNames","listPropNamesWithEnsuredCompleteKeys","listProps","inputPropNames","inputPropNamesWithEnsuredCompleteKeys","inputProps","pressablePropNames","pressablePropNamesWithEnsuredCompleteKeys","pressableProps","domProps","makePropsFilter","allPropsSet","propsSets","forEach","el","add","propsCopy","styled","p","templateFunction","attrs","attrMaker","Function","View","Text","Image","ScrollView","FlatList","SectionList","TouchableOpacity","TextInput","SafeAreaView","filterProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAO,IAAMA,eAAe,gBAAG,IAAIC,GAAJ,CAAQ,CACrC,iBADqC,EAErC,OAFqC,EAGrC,kBAHqC,EAIrC,mBAJqC,EAKrC,aALqC,EAMrC,gBANqC,EAOrC,iBAPqC,EAQrC,iBARqC,EASrC,kBATqC,EAUrC,gBAVqC,EAWrC,aAXqC,EAYrC,qBAZqC,CAAR,CAAxB;AAeA,IAAMC,gBAAgB,gBAAG,IAAID,GAAJ,CAAQ,CACtC,OADsC,EAEtC,QAFsC,EAGtC,uBAHsC,EAItC,wBAJsC,EAKtC,yBALsC,EAMtC,yBANsC,EAOtC,mBAPsC,EAQtC,iBARsC,EAStC,cATsC,EAUtC,kBAVsC,EAWtC,oBAXsC,EAYtC,qBAZsC,EAatC,sBAbsC,EActC,sBAdsC,EAetC,gBAfsC,EAgBtC,aAhBsC,EAiBtC,WAjBsC,EAkBtC,QAlBsC,EAmBtC,KAnBsC,EAoBtC,MApBsC,EAqBtC,OArBsC,EAsBtC,OAtBsC,EAuBtC,KAvBsC,EAwBtC,QAxBsC,EAyBtC,cAzBsC,EA0BtC,WA1BsC,EA2BtC,kBA3BsC,EA4BtC,YA5BsC,EA6BtC,aA7BsC,EA8BtC,aA9BsC,EA+BtC,WA/BsC,EAgCtC,gBAhCsC,EAiCtC,WAjCsC,EAkCtC,UAlCsC,EAmCtC,WAnCsC,EAoCtC,UApCsC,EAqCtC,SArCsC,EAsCtC,eAtCsC,EAuCtC,YAvCsC,EAwCtC,mBAxCsC,EAyCtC,aAzCsC,EA0CtC,cA1CsC,EA2CtC,cA3CsC,EA4CtC,YA5CsC,EA6CtC,iBA7CsC,EA8CtC,cA9CsC,EA+CtC,cA/CsC,EAgDtC,YAhDsC,EAiDtC,UAjDsC,EAkDtC,eAlDsC,CAAR,CAAzB;;ICMIE,YAAY,gBAAGC,aAAa,CAAC,IAAD,CAAhC;AAEP,IAAaC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,oBAAD;AAC7BH,EAAAA,YAAY,GAAGG,oBAAf;AACD,CAFM;AAIP,IAAaC,QAAQ,GAAG,SAAXA,QAAW;AACtB,MAAMC,KAAK,GAAGC,UAAU,CAACN,YAAD,CAAxB;AACA,MAAI,CAACK,KAAL,EAAY,MAAM,IAAIE,KAAJ,CAAU,yDAAV,CAAN;AACZ,SAAOF,KAAP;AACD,CAJM;AAMP,IAAaG,SAAS,GAAG,SAAZA,SAAY,CACvBC,SADuB;AAGvB,MAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD;AACzB,QAAMN,KAAK,GAAGD,QAAQ,EAAtB;AACA,WACEQ,mBAAA,CAACH,SAAD,oBAAeE;AAAON,MAAAA,KAAK,EAAEA;MAA7B,EACGM,KAAK,CAACE,QAAN,IAAkB,IADrB,CADF;AAKD,GAPD;;AAQAH,EAAAA,kBAAkB,CAACI,WAAnB,mBAA8CL,SAAS,CAACK,WAAV,IAAyBL,SAAS,CAACM,IAAjF;AACA,SAAOL,kBAAP;AACD,CAbM;AAeP,IAAaM,aAAa,GAAG,SAAhBA,aAAgB;MAC3BX,aAAAA;MACAQ,gBAAAA;MACAI,eAAAA;2BACAC;MAAAA,sCAAW;mCACXC;MAAAA,yDAAsB;kCACtBC;MAAAA,oDAAkB;AASlB;AACA;AACA,MAAMC,MAAM,GAAGhB,KAAK,CAACgB,MAArB;AACA,MAAMC,eAAe,GACnBH,mBAAmB,CAACI,SAApB,CAA8B,CAA9B,EAAiC,CAAjC,MAAwC,GAAxC,GACIF,MAAM,CAACF,mBAAmB,CAACI,SAApB,CAA8B,CAA9B,CAAD,CADV,GAEIJ,mBAHN;AAIA,SACEP,mBAAA,CAACZ,YAAY,CAACwB,QAAd;AAAuBC,IAAAA,KAAK,EAAEpB;GAA9B,EACEO,mBAAA,eAAA,MAAA,EACGc,QAAQ,CAACC,EAAT,KAAgB,KAAhB,GACCf,mBAAA,QAAA;AACE;AACAgB,IAAAA,uBAAuB,EAAE;AACvBC,MAAAA,MAAM,6EAEaX,QAFb,8EAIYI,eAJZ,wCAKWjB,KAAK,CAACyB,GALjB,2FAQFV,eAAe,GAAG,4CAAH,GAAkD,EAR/D,4BASFH,OAAO,IAAI,EATT;AADiB;AAazBc,IAAAA,GAAG,EAAC;GAfN,CADD,GAkBG,IAnBN,EAoBGlB,QApBH,CADF,CADF;AA0BD,CAhDM;;AAmDP,IAAImB,cAAc,GAAG,CAArB;AACA,IAAMC,WAAW,GAAG;AAClBC,EAAAA,aAAa,eAAE,IAAIC,GAAJ,CAAwB,EAAxB,CADG;AAElBC,EAAAA,UAAU,eAAE,IAAID,GAAJ,CAAwB,EAAxB;AAFM,CAApB;AAIA,AAAO,IAAME,+BAA+B,GAAG,SAAlCA,+BAAkC,CAACC,YAAD;AAC7C,MAAI,CAACL,WAAW,CAACC,aAAZ,CAA0BK,GAA1B,CAA8BD,YAA9B,CAAL,EAAkD;AAChD,QAAME,cAAc,SAAO,CAACR,cAAc,EAAf,EAAmBS,QAAnB,CAA4B,EAA5B,EAAgCC,QAAhC,CAAyC,CAAzC,EAA4C,GAA5C,EAAiDC,WAAjD,EAAP,OAApB;AACAV,IAAAA,WAAW,CAACC,aAAZ,CAA0BU,GAA1B,CAA8BN,YAA9B,EAA4CE,cAA5C;AACAP,IAAAA,WAAW,CAACG,UAAZ,CAAuBQ,GAAvB,CAA2BJ,cAA3B,EAA2CF,YAAY,CAACf,SAAb,CAAuB,CAAvB,CAA3C;AACD;;AACD,SAAOU,WAAW,CAACC,aAAZ,CAA0BW,GAA1B,CAA8BP,YAA9B,CAAP;AACD,CAPM;;AAUP,IAAMQ,cAAc,GAAGpB,QAAQ,CAACC,EAAT,KAAgB,KAAvC;AAEA,AAAO,IAAMoB,iBAAiB,GAAG,SAApBA,iBAAoB,CAC/BC,GAD+B,EAE/B3C,KAF+B,EAG/B4C,gBAH+B;AAK/B,MAAI,CAACD,GAAD,IAAQ,OAAOA,GAAP,KAAe,QAA3B,EAAqC,OAAOA,GAAP;AACrC,MAAI,OAAOA,GAAP,KAAe,QAAnB,EAA6B,MAAM,IAAIzC,KAAJ,eAAsByC,GAAtB,qBAAN;AAC7B,MAAMvB,KAAK,GAAGyB,MAAM,CAACC,UAAP,CAAkBH,GAAlB,CAAd;AACA,MAAIvB,KAAK,KAAK,CAAd,EAAiB,OAAO,CAAP;AACjB,MAAM2B,IAAI,GAAGJ,GAAG,CAACK,IAAJ,GAAWC,OAAX,CAAmBC,MAAM,CAAC9B,KAAD,CAAzB,EAAkC,EAAlC,CAAb;AACA,MAAI,CAAC2B,IAAL,EAAW,MAAM,IAAI7C,KAAJ,qBAA4ByC,GAA5B,wBAAN;;AACX,UAAQI,IAAR;AACE,SAAK,KAAL;AACE,aAAO3B,KAAK,GAAGpB,KAAK,CAACyB,GAArB;;AACF,SAAK,IAAL;AACE,aAAOL,KAAP;;AACF,SAAK,GAAL;AACE,aAAOuB,GAAP;;AACF,SAAK,IAAL;AACE,aAAQvB,KAAK,GAAGwB,gBAAgB,CAACO,KAA1B,GAAmC,GAA1C;;AACF,SAAK,IAAL;AACE,aAAQ/B,KAAK,GAAGwB,gBAAgB,CAACQ,MAA1B,GAAoC,GAA3C;;AACF;AACE,YAAM,IAAIlD,KAAJ,kCAAyCyC,GAAzC,yBAAgEI,IAAhE,OAAN;AAZJ;AAcD,CAzBM;AA2BP,AAAO,IAAMM,qBAAqB,GAAG,SAAxBA,qBAAwB,CACnCC,WADmC,EAEnCtD,KAFmC,EAGnC4C,gBAHmC;AAKnC,OAAK,IAAMlB,GAAX,IAAkB4B,WAAlB,EAA+B;AAC7B,QAAI5B,GAAG,KAAK,WAAR,IAAuB1B,KAAK,CAACuD,SAAjC,EAA4C;AAC1C,UAAMC,iBAAiB,GAAGxD,KAAK,CAACuD,SAAN,CAAgBD,WAAW,CAAC5B,GAAD,CAA3B,CAA1B;;AACA,WAAK,IAAM+B,SAAX,IAAwBD,iBAAxB,EAA2C;AACzC;AACA;AACAF,QAAAA,WAAW,CAACG,SAAD,CAAX,GAAyBD,iBAAiB,CAACC,SAAD,CAA1C;AACD;AACF;;AACD,QAAI/B,GAAG,KAAK,QAAR,IAAoB,CAACe,cAAzB,EAAyC,OAAOa,WAAW,CAACI,MAAnB,CATZ;;AAW7B,QAAIlE,eAAe,CAAC0C,GAAhB,CAAoBR,GAApB,CAAJ,EAA8B;AAC5B,UAAMiC,SAAS,GAAG/B,WAAW,CAACG,UAAZ,CAAuBS,GAAvB,CAA2Bc,WAAW,CAAC5B,GAAD,CAAtC,CAAlB;;AACA,UAAIiC,SAAJ,EAAe;AACb;AACA;AACA,YAAM3C,MAAM,GAAGhB,KAAK,CAACgB,MAArB;;AACA,YAAI2C,SAAS,IAAI3C,MAAjB,EAAyB;AACvBsC,UAAAA,WAAW,CAAC5B,GAAD,CAAX,GAAmBV,MAAM,CAAC2C,SAAD,CAAzB;AACD,SAFD,MAEO;AACL,gBAAM,IAAIzD,KAAJ,2BAAkCyD,SAAlC,0CAAN;AACD;AACF;AACF,KAvB4B;;;AAyB7B,QAAI,CAAClB,cAAD,IAAmB/C,gBAAgB,CAACwC,GAAjB,CAAqBR,GAArB,CAAnB,IAAgD,OAAO4B,WAAW,CAAC5B,GAAD,CAAlB,KAA4B,QAAhF,EAA0F;AACxF4B,MAAAA,WAAW,CAAC5B,GAAD,CAAX,GAAmBgB,iBAAiB,CAACY,WAAW,CAAC5B,GAAD,CAAZ,EAAmB1B,KAAnB,EAA0B4C,gBAA1B,CAApC;AACD;AACF;;AACD,SAAOU,WAAP;AACD,CAnCM;;AC9HP,IAAMM,gBAAgB,gBAAG,IAAIC,MAAJ,CAAW,mBAAX,EAAgC,GAAhC,CAAzB;;AACA,IAAMC,sBAAsB,GAOxB,SAPEA,sBAOF,CACFC,OADE,EAEFC,WAFE,EAGF1D,KAHE;AAAA,SAKFyD,OAAO,CACJE,GADH,CACO,UAACtB,GAAD,EAAMuB,CAAN;AACH;AACA,QAAMC,GAAG,GAAGH,WAAW,CAACI,MAAZ,GAAqBF,CAArB,GAAyBF,WAAW,CAACE,CAAD,CAApC,GAA0C,EAAtD;;AACA,QAAI,OAAOC,GAAP,KAAe,QAAf,IAA2B,OAAOA,GAAP,KAAe,QAA9C,EAAwD;AACtD,aAAOxB,GAAG,GAAGwB,GAAb;AACD,KAFD,MAEO;AACL,aAAOxB,GAAG,GAAGwB,GAAG,CAAC7D,KAAD,CAAhB;AACD;AACF,GATH,EAUG+D,IAVH,CAUQ,EAVR;AAAA,GAYGpB,OAZH,CAYWW,gBAZX,EAY6B,EAZ7B,CALE;AAAA,CAPJ;;;AA2BA,IAAMU,cAAc,gBAAG,IAAIT,MAAJ,CAAW,aAAX,EAA0B,GAA1B,CAAvB;AACA,IAAMU,gBAAgB,gBAAG,IAAIzC,GAAJ,CAAuB,EAAvB,CAAzB;;AACA,IAAM0C,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,cAAD;AACxB,MAAI,CAACA,cAAL,EAAqB,OAAO,EAAP;AACrB,MAAInB,WAAW,GAAGiB,gBAAgB,CAAC/B,GAAjB,CAAqBiC,cAArB,CAAlB;;AACA,MAAI,CAACnB,WAAL,EAAkB;AAChBA,IAAAA,WAAW,GAAGoB,MAAM,CAACC,MAAP,OAAAD,MAAM,GAClB,EADkB,SAEfD,cAAc,CACdG,KADA,CACM,GADN,EAEAX,GAFA,CAEI,UAACY,IAAD;AAAA,aACHA,IAAI,CACDD,KADH,CACS,GADT,EAEGX,GAFH,CAEO,UAAC7C,KAAD;AAAA,eAAWA,KAAK,IAAIA,KAAK,CAAC4B,IAAN,EAApB;AAAA,OAFP,EAGG8B,MAHH,CAGU,UAAC1D,KAAD;AAAA,eAAWA,KAAX;AAAA,OAHV,CADG;AAAA,KAFJ,EAQA0D,MARA,CAQO,UAACD,IAAD;AAAA,aAAUA,IAAI,CAACT,MAAL,KAAgB,CAA1B;AAAA,KARP,EASAH,GATA,CASI;UAAEvD;UAAMU;AACX,UAAM2D,aAAa,GAAG3D,KAAK,CAAC6B,OAAN,CAAcqB,cAAd,EAA8B,UAACU,QAAD;AAAA,eAClDhD,+BAA+B,CAACgD,QAAD,CADmB;AAAA,OAA9B,CAAtB;;AAGA,UAAI;AACF,eAAOC,oBAAoB,CAACC,eAAe,CAACxE,IAAD,CAAhB,EAAwBqE,aAAxB,CAA3B;AACD,OAFD,CAEE,OAAOI,CAAP,EAAU;AACV,cAAM,IAAIjF,KAAJ,uBAA8BQ,IAA9B,UAAuCU,KAAvC,WAAkD+D,CAAC,CAACC,OAApD,CAAN;AACD;AACF,KAlBA,CAFe,EAApB;AAsBAb,IAAAA,gBAAgB,CAAChC,GAAjB,CAAqBkC,cAArB,EAAqCnB,WAArC;AACD;;AACD,SAAOA,WAAP;AACD,CA7BD;;AAgCA,IAAM+B,uBAAuB,gBAAG,IAAIvD,GAAJ,CAA8B,EAA9B,CAAhC;;AAEA,AAAO,IAAMwD,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACb,cAAD;AACrC,MAAIc,iBAAiB,GAAGF,uBAAuB,CAAC7C,GAAxB,CAA4BiC,cAA5B,CAAxB;;AACA,MAAI,CAACc,iBAAL,EAAwB;AACtBA,IAAAA,iBAAiB,GAAG;AAAEC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,IAAI,EAAE;AAAR;AAAT,KAApB;AACA,QAAIC,KAAJ;AACA,QAAIC,KAAK,GAAG,CAAZ;AACA,QAAIjF,IAAJ;AACA,QAAIkF,KAAK,GAAG,CAAZ;AACA,QAAIC,eAAe,GAAG,EAAtB;AACA,QAAMC,WAAW,GAAG,IAAIjC,MAAJ,CAAW,mBAAX,EAAgC,GAAhC,CAApB;;AACA,WAAQ6B,KAAK,GAAGI,WAAW,CAACC,IAAZ,CAAiBtB,cAAjB,CAAhB,EAAmD;AACjD,UAAImB,KAAK,KAAK,CAAd,EAAiB;AACfC,QAAAA,eAAe,IAAIpB,cAAc,CAACvD,SAAf,CAAyByE,KAAzB,EAAgCD,KAAK,CAACM,KAAtC,CAAnB;AACAL,QAAAA,KAAK,GAAGD,KAAK,CAACM,KAAN,GAAcN,KAAK,CAAC,CAAD,CAAL,CAAStB,MAA/B;AACA1D,QAAAA,IAAI,GAAG+D,cAAc,CAACvD,SAAf,CAAyBwE,KAAK,CAACM,KAA/B,EAAsCN,KAAK,CAACM,KAAN,GAAcN,KAAK,CAAC,CAAD,CAAL,CAAStB,MAAvB,GAAgC,CAAtE,EAAyEpB,IAAzE,EAAP;AACD;;AACD4C,MAAAA,KAAK,GAAGA,KAAK,IAAIF,KAAK,CAAC,CAAD,CAAL,KAAa,GAAb,GAAmB,CAAC,CAApB,GAAwB,CAAC,CAA7B,CAAb;;AACA,UAAIE,KAAK,KAAK,CAAd,EAAiB;AACf,YAAMK,WAAW,GAAGxB,cAAc,CAACvD,SAAf,CAAyByE,KAAzB,EAAgCD,KAAK,CAACM,KAAtC,EAA6ChD,IAA7C,EAApB;AACA2C,QAAAA,KAAK,GAAGD,KAAK,CAACM,KAAN,GAAc,CAAtB;;AACA,YAAItF,IAAK,CAACQ,SAAN,CAAgB,CAAhB,EAAmB,CAAnB,MAA0B,QAA9B,EAAwC;AACtCqE,UAAAA,iBAAiB,CAACC,KAAlB,CAAwB9E,IAAK,CAACQ,SAAN,CAAgB,CAAhB,EAAmB8B,IAAnB,EAAxB,IAAqDwB,iBAAiB,CAACyB,WAAD,CAAtE;AACD,SAFD,MAEO;AACLV,UAAAA,iBAAiB,CAAC7E,IAAK,GAAG,OAAT,CAAjB,GAAqC4E,uBAAuB,CAACW,WAAD,CAAvB,CAAqCT,KAA1E;AACD;AACF;AACF;;AACDK,IAAAA,eAAe,IAAIpB,cAAc,CAACvD,SAAf,CAAyByE,KAAzB,EAAgClB,cAAc,CAACL,MAA/C,CAAnB;AACAmB,IAAAA,iBAAiB,CAACC,KAAlB,CAAwBC,IAAxB,GAA+BjB,iBAAiB,CAACqB,eAAe,CAAC7C,IAAhB,EAAD,CAAhD;AACAqC,IAAAA,uBAAuB,CAAC9C,GAAxB,CAA4BkC,cAA5B,EAA4Cc,iBAA5C;AACD;;AACD,SAAOA,iBAAP;AACD,CAhCM;;AAkCP,IAAMW,cAAc,GAAG,SAAjBA,cAAiB,CAACC,SAAD,EAAoBnG,KAApB,EAAkC4C,gBAAlC;AACrB,MAAIwD,OAAO,GAAG,IAAd;;AACA,uDAAwBD,SAAS,CAACvB,KAAV,CAAgB,KAAhB,CAAxB,wCAAgD;AAAA,QAArCyB,SAAqC;;AAAA,gCACvBA,SAAS,CAACpD,OAAV,CAAkB,QAAlB,EAA4B,EAA5B,EAAgCD,IAAhC,GAAuC4B,KAAvC,CAA6C,GAA7C,CADuB;AAAA,QACvClE,IADuC;AAAA,QACjC4F,MADiC;;AAE9C,QAAMlF,KAAK,GAAGsB,iBAAiB,CAAC4D,MAAD,EAAStG,KAAT,EAAgB4C,gBAAhB,CAA/B;AACA,QAAI,OAAOxB,KAAP,KAAiB,QAArB,EAA+B,MAAM,IAAIlB,KAAJ,6BAAoCiG,SAApC,CAAN;AAHe,QAItChD,KAJsC,GAIpBP,gBAJoB,CAItCO,KAJsC;AAAA,QAI/BC,MAJ+B,GAIpBR,gBAJoB,CAI/BQ,MAJ+B;;AAK9C,YAAQ1C,IAAR;AACE,WAAK,WAAL;AACE0F,QAAAA,OAAO,GAAGA,OAAO,IAAIjD,KAAK,IAAI/B,KAA9B;AACA;;AACF,WAAK,WAAL;AACEgF,QAAAA,OAAO,GAAGA,OAAO,IAAIjD,KAAK,IAAI/B,KAA9B;AACA;;AACF,WAAK,YAAL;AACEgF,QAAAA,OAAO,GAAGA,OAAO,IAAIhD,MAAM,IAAIhC,KAA/B;AACA;;AACF,WAAK,YAAL;AACEgF,QAAAA,OAAO,GAAGA,OAAO,IAAIhD,MAAM,IAAIhC,KAA/B;AACA;AAZJ,KAL8C;;AAoB/C;;AACD,SAAOgF,OAAP;AACD,CAxBD;;;AA2BA,IAAMG,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,MADoB,EAEpBxG,KAFoB,EAGpB4C,gBAHoB;AAKpB,SAAO6D,OAAO,CAAC;AACb,QAAMC,WAAW,GAA6B,EAA9C;;AAEA,QAAMC,UAAU,gBAAQH,MAAR,CAAhB;;AACA,SAAK,IAAM9E,GAAX,IAAkBiF,UAAlB,EAA8B;AAAA,4BACSA,UAAU,CAACjF,GAAD,CADnB;AAAA,UACpB+D,IADoB,mBACpBA,IADoB;AAAA,UACXmB,eADW;;;AAG5B,UAAMC,gBAAgB,GAAG,CAACxD,qBAAqB,cAAMoC,IAAN,GAAczF,KAAd,EAAqB4C,gBAArB,CAAtB,CAAzB;;AACA,WAAK,IAAMuD,SAAX,IAAwBS,eAAxB,EAAyC;AACvC,YAAIV,cAAc,CAACC,SAAD,EAAYnG,KAAZ,EAAmB4C,gBAAnB,CAAlB,EAAwD;AACtDiE,UAAAA,gBAAgB,CAACC,IAAjB,CACEzD,qBAAqB,cAAMuD,eAAe,CAACT,SAAD,CAArB,GAAoCnG,KAApC,EAA2C4C,gBAA3C,CADvB;AAGD;AACF;;AACD8D,MAAAA,WAAW,CAAChF,GAAD,CAAX,GAAmBgD,MAAM,CAACC,MAAP,OAAAD,MAAM,GAAQ,EAAR,SAAemC,gBAAf,EAAzB;AACD;;AACD,WAAOE,UAAU,CAACC,MAAX,CAAkBN,WAAlB,CAAP;AACD,GAlBa,EAkBX,CAACF,MAAD,EAASxG,KAAT,EAAgB4C,gBAAhB,CAlBW,CAAd;AAmBD,CAxBD;;AA0CA,AAAO,IAAMqE,oBAAoB,GAAG,SAAvBA,oBAAuB,CAKlC7G,SALkC,EAMlC8G,cANkC,EAOlCC,oBAPkC;AAAA,SAQJ,UAC9BpD,OAD8B;sCAE3BC;AAAAA,MAAAA;;;AAEH,QAAMvD,WAAW,gBAAaL,SAAS,CAACK,WAAV,IAAyBL,SAAS,CAACM,IAAhD,OAAjB;AACA,QAAI0G,8BAAJ;;AACA,QAAIpD,WAAW,CAACqD,KAAZ,CAAkB,UAAClD,GAAD;AAAA,aAAS,OAAOA,GAAP,KAAe,QAAxB;AAAA,KAAlB,CAAJ,EAAyD;AACvD;AACA,UAAMmD,SAAS,GAAGxD,sBAAsB,CAACC,OAAD,EAAUC,WAAV,CAAxC;AACA,UAAMwC,MAAM,GAAGlB,uBAAuB,CAACgC,SAAD,CAAtC;;AACAF,MAAAA,8BAA8B,GAAG;AAE/B;AAF+B,aAI/BG,GAJ+B;YAG7B/G,iBAAAA;YAAUgF,cAAAA;YAAUlF;;AAGtB,YAAMN,KAAK,GAAGD,QAAQ,EAAtB;AACA,YAAMyH,UAAU,GAAGC,mBAAmB,EAAtC;AACA,YAAIC,UAAU,GAAuCnB,aAAa,CAACC,MAAD,EAASxG,KAAT,EAAgBwH,UAAhB,CAAlE;AACAE,QAAAA,UAAU,GAAGlC,KAAK,gBAAQkC,UAAR;AAAoBlC,UAAAA,KAAK,EAAE,CAACkC,UAAU,CAAClC,KAAZ,EAAmBA,KAAnB;AAA3B,aAAyDkC,UAA3E;AACA,YAAMC,gBAAgB,GAAGT,cAAc,cAAM5G,KAAN;AAAaN,UAAAA,KAAK,EAALA;AAAb,WAAvC;AACA,eACEO,mBAAA,CAACH,SAAD,oBAAe+G,oBAAoB,CAACQ,gBAAD,GAAwBD;AAAYH,UAAAA,GAAG,EAAEA;UAA5E,EACG/G,QADH,CADF;AAKD,OAhBD;AAiBD,KArBD,MAqBO;AACL;AACA4G,MAAAA,8BAA8B,GAAG;AAE/B;AAF+B,aAI/BG,GAJ+B;YAG7B/G,iBAAAA;YAAUgF,cAAAA;YAAUlF;;AAGtB,YAAMN,KAAK,GAAGD,QAAQ,EAAtB;AACA,YAAMyH,UAAU,GAAGC,mBAAmB,EAAtC;AACA,YAAME,gBAAgB,GAAGT,cAAc,cAAM5G,KAAN;AAAaN,UAAAA,KAAK,EAALA;AAAb,WAAvC;AACA,YAAMsH,SAAS,GAAGb,OAAO,CAAC;AACxB,iBAAO3C,sBAAsB,CAACC,OAAD,EAAUC,WAAV,EAAuB2D,gBAAvB,CAA7B;AACD,SAFwB,EAEtB,CAACA,gBAAD,CAFsB,CAAzB;AAGA,YAAMnB,MAAM,GAAGC,OAAO,CAAC;AAAA,iBAAMnB,uBAAuB,CAACgC,SAAD,CAA7B;AAAA,SAAD,EAA2C,CAACA,SAAD,CAA3C,CAAtB;AACA,YAAII,UAAU,GAAuCnB,aAAa,CAACC,MAAD,EAASxG,KAAT,EAAgBwH,UAAhB,CAAlE;AACAE,QAAAA,UAAU,GAAGlC,KAAK,gBAAQkC,UAAR;AAAoBlC,UAAAA,KAAK,EAAE,CAACkC,UAAU,CAAClC,KAAZ,EAAmBA,KAAnB;AAA3B,aAAyDkC,UAA3E;AACA,eACEnH,mBAAA,CAACH,SAAD,oBAAe+G,oBAAoB,CAACQ,gBAAD,GAAwBD;AAAYH,UAAAA,GAAG,EAAEA;UAA5E,EACG/G,QADH,CADF;AAKD,OApBD;AAqBD;;AACD4G,IAAAA,8BAA8B,CAAC3G,WAA/B,GAA6CA,WAA7C;AAEA;;AACA,WAAOmH,IAAI,CAACC,UAAU,CAACT,8BAAD,CAAX,CAAX;AACD,GA/DmC;AAAA,CAA7B;AAiEP,IAAaU,QAAQ,GAAG,SAAXA,QAAW,CAACrD,cAAD;AACtB,MAAMzE,KAAK,GAAGD,QAAQ,EAAtB;AACA,MAAMyH,UAAU,GAAGC,mBAAmB,EAAtC;AACA,MAAMjB,MAAM,GAAGC,OAAO,CAAC;AAAA,WAAMnB,uBAAuB,CAACb,cAAc,CAACzB,IAAf,EAAD,CAA7B;AAAA,GAAD,EAAuD,EAAvD,CAAtB;AACA,SAAOuD,aAAa,CAACC,MAAD,EAASxG,KAAT,EAAgBwH,UAAhB,CAAb,CAAyChC,KAAhD;AACD,CALM;;ICpPMuC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,MAAD;AAChC,MAAMhI,KAAK,GAAGD,QAAQ,EAAtB;AACA,MAAM6C,gBAAgB,GAAG6E,mBAAmB,EAA5C;AACA,SAAOhB,OAAO,CAAC;AACb,QAAMwB,YAAY,GAAGD,MAAM,CAAC/E,OAAP,CAAe,QAAf,EAAyB,GAAzB,EAA8B2B,KAA9B,CAAoC,GAApC,CAArB;AACA,QAAMsD,WAAW,GAAGD,YAAY,CAAChE,GAAb,CAAiB,UAACtB,GAAD;AAAA,aACnCD,iBAAiB,CAACC,GAAD,EAAM3C,KAAN,EAAa4C,gBAAb,CADkB;AAAA,KAAjB,CAApB;AAGA,WAAO,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAaqB,GAAb,CAAiB,UAACC,CAAD;AAAA,aACtBgE,WAAW,CAAChE,CAAD,CAAX,KAAmBiE,SAAnB,GACID,WAAW,CAAChE,CAAD,CADf,GAEIgE,WAAW,CAAChE,CAAC,GAAG,CAAL,CAAX,KAAuBiE,SAAvB,GACAD,WAAW,CAAChE,CAAC,GAAG,CAAL,CADX,GAEAgE,WAAW,CAAC,CAAD,CAAX,IAAkB,CALA;AAAA,KAAjB,CAAP;AAOD,GAZa,EAYX,CAACF,MAAD,EAAShI,KAAT,EAAgB4C,gBAAhB,CAZW,CAAd;AAaD,CAhBM;AAkBP,IAAawF,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,KAAD;AAC/B,MAAMrI,KAAK,GAAGD,QAAQ,EAAtB;AAEA;;AACA,MAAMiB,MAAM,GAAGhB,KAAK,CAACgB,MAArB;AACA,SAAOqH,KAAK,IAAIrH,MAAT,GACHA,MAAM,CAACqH,KAAD,CADH,GAEHA,KAAK,IAAIA,KAAK,CAACnH,SAAN,CAAgB,CAAhB,KAAsBF,MAA/B,GACAA,MAAM,CAACqH,KAAK,CAACnH,SAAN,CAAgB,CAAhB,CAAD,CADN,GAEAmH,KAJJ;AAKD,CAVM;;ACXP,IAAMC,sBAAsB,GAAG,CAC7B,YAD6B,EAE7B,sBAF6B,EAG7B,oBAH6B,EAI7B,mBAJ6B,EAK7B,oBAL6B,EAM7B,mBAN6B,EAO7B,oBAP6B,EAQ7B,uBAR6B,EAS7B,4BAT6B,EAU7B,yBAV6B,EAW7B,2BAX6B,EAY7B,6BAZ6B,EAa7B,qBAb6B,EAc7B,0BAd6B,EAe7B,uBAf6B,EAgB7B,oBAhB6B,EAiB7B,YAjB6B,EAkB7B,kCAlB6B,CAA/B;;AAqBA,IAAMC,6CAA6C,GAAqDD,sBAAxG;AAGA,IAAME,aAAa,iBACjB,OADiB,SAEdD,6CAFc,GAGjB,2BAHiB,EAIjB,SAJiB,EAKjB,UALiB,EAMjB,UANiB,EAOjB,0BAPiB,EAQjB,iCARiB,EASjB,kBATiB,EAUjB,iBAViB,EAWjB,mBAXiB,EAYjB,oBAZiB,EAajB,sBAbiB,EAcjB,+BAdiB,EAejB,kCAfiB,EAgBjB,eAhBiB,EAiBjB,uBAjBiB,EAkBjB,QAlBiB,EAmBjB,aAnBiB,EAoBjB,gCApBiB,EAqBjB,gCArBiB,EAsBjB,oBAtBiB,EAuBjB,WAvBiB,EAwBjB,gBAxBiB,EAyBjB,qBAzBiB,EA0BjB,sBA1BiB,EA2BjB,0BA3BiB,EA4BjB,0BA5BiB,EA6BjB,qBA7BiB,EA8BjB,yBA9BiB,EA+BjB,gBA/BiB,EAgCjB,kBAhCiB,EAiCjB,cAjCiB,EAkCjB,aAlCiB,EAmCjB,YAnCiB,EAoCjB,eApCiB,EAqCjB,mBArCiB,EAAnB;;AAwCA,IAAME,oCAAoC,GAA4CD,aAAtF;AACA,AAAO,IAAME,SAAS,gBAAG,IAAIjJ,GAAJ,CAAQgJ,oCAAR,CAAlB;AAGP,IAAME,aAAa,iBACjB,OADiB,SAEdJ,6CAFc,GAGjB,YAHiB,EAIjB,eAJiB,EAKjB,UALiB,EAMjB,eANiB,EAOjB,UAPiB,EAQjB,aARiB,EASjB,SATiB,EAUjB,sBAViB,EAWjB,kBAXiB,EAYjB,QAZiB,EAajB,UAbiB,EAcjB,gBAdiB,EAejB,mBAfiB,EAgBjB,sBAhBiB,EAiBjB,kBAjBiB,EAkBjB,sBAlBiB,EAmBjB,eAnBiB,EAoBjB,eApBiB,EAqBjB,uBArBiB,EAAnB;;AAwBA,IAAMK,oCAAoC,GAA4CD,aAAtF;AACA,AAAO,IAAME,SAAS,gBAAG,IAAIpJ,GAAJ,CAAQmJ,oCAAR,CAAlB;AAaP,IAAME,cAAc,iBAClB,OADkB,SAEfP,6CAFe,GAGlB,YAHkB,EAIlB,UAJkB,EAKlB,QALkB,EAMlB,WANkB,EAOlB,aAPkB,EAQlB,YARkB,EASlB,QATkB,EAUlB,wBAVkB,EAWlB,SAXkB,EAYlB,QAZkB,EAalB,cAbkB,EAclB,WAdkB,EAelB,eAfkB,EAgBlB,eAhBkB,EAiBlB,YAjBkB,EAkBlB,cAlBkB,EAmBlB,eAnBkB,EAoBlB,6BApBkB,EAApB;;AAuBA,IAAMQ,qCAAqC,GAA6CD,cAAxF;AACA,AAAO,IAAME,UAAU,gBAAG,IAAIvJ,GAAJ,CAAQsJ,qCAAR,CAAnB;AAGP,IAAME,aAAa,0BACdR,oCADc,GAEjB,oBAFiB,EAGjB,uBAHiB,EAIjB,gBAJiB,GAKdF,6CALc,GAMjB,YANiB,EAOjB,MAPiB,EAQjB,UARiB,EASjB,wBATiB,EAUjB,oBAViB,EAWjB,qBAXiB,EAYjB,qBAZiB,EAajB,WAbiB,EAcjB,eAdiB,EAejB,YAfiB,EAgBjB,oBAhBiB,EAiBjB,oBAjBiB,EAkBjB,UAlBiB,EAmBjB,cAnBiB,EAoBjB,YApBiB,EAqBjB,cArBiB,EAsBjB,uBAtBiB,EAuBjB,WAvBiB,EAwBjB,wBAxBiB,EAyBjB,oBAzBiB,EA0BjB,sBA1BiB,EA2BjB,YA3BiB,EA4BjB,mBA5BiB,EA6BjB,gCA7BiB,EA8BjB,qBA9BiB,EA+BjB,qBA/BiB,EAgCjB,2BAhCiB,EAiCjB,6BAjCiB,EAkCjB,2BAlCiB,EAmCjB,YAnCiB,EAoCjB,uBApCiB,EAqCjB,SArCiB,EAsCjB,cAtCiB,EAuCjB,OAvCiB,EAwCjB,uBAxCiB,EAyCjB,uBAzCiB,EA0CjB,uBA1CiB,EA2CjB,qBA3CiB,EA4CjB,sBA5CiB,EA6CjB,qBA7CiB,EA8CjB,2BA9CiB,EA+CjB,qBA/CiB,EAgDjB,uBAhDiB,EAiDjB,qBAjDiB,EAkDjB,UAlDiB,EAmDjB,mBAnDiB,EAoDjB,iBApDiB,EAqDjB,eArDiB,EAsDjB,gBAtDiB,EAuDjB,eAvDiB,EAwDjB,gCAxDiB,EAyDjB,8BAzDiB,EA0DjB,qBA1DiB,EA2DjB,cA3DiB,EA4DjB,gBA5DiB,EA6DjB,eA7DiB,EA8DjB,wBA9DiB,EA+DjB,kCA/DiB,EAgEjB,SAhEiB,EAiEjB,aAjEiB,EAkEjB,yBAlEiB,EAmEjB,eAnEiB,EAoEjB,cApEiB,EAqEjB,gCArEiB,EAsEjB,eAtEiB,EAuEjB,kBAvEiB,EAwEjB,wBAxEiB,EAyEjB,kBAzEiB,EA0EjB,kBA1EiB,EA2EjB,qBA3EiB,EA4EjB,qBA5EiB,EA6EjB,uBA7EiB,EA8EjB,cA9EiB,EA+EjB,iBA/EiB,EAgFjB,gBAhFiB,EAiFjB,eAjFiB,EAkFjB,aAlFiB,EAmFjB,WAnFiB,EAoFjB,WApFiB,EAqFjB,qBArFiB,EAsFjB,SAtFiB,EAuFjB,qBAvFiB,EAwFjB,yBAxFiB,EAyFjB,+BAzFiB,EA0FjB,sBA1FiB,EA2FjB,yBA3FiB,EA4FjB,eA5FiB,EA6FjB,kBA7FiB,EA8FjB,qBA9FiB,EAAnB;;AAiGA,IAAMW,oCAAoC,GAA4CD,aAAtF;AACA,AAAO,IAAME,SAAS,gBAAG,IAAI1J,GAAJ,CAAQyJ,oCAAR,CAAlB;AAGP,IAAME,cAAc,0BACfX,oCADe,EAEfF,6CAFe,GAGlB,kBAHkB,EAIlB,gBAJkB,EAKlB,aALkB,EAMlB,WANkB,EAOlB,cAPkB,EAQlB,aARkB,EASlB,iBATkB,EAUlB,kBAVkB,EAWlB,mBAXkB,EAYlB,mBAZkB,EAalB,cAbkB,EAclB,qBAdkB,EAelB,UAfkB,EAgBlB,+BAhBkB,EAiBlB,iBAjBkB,EAkBlB,oBAlBkB,EAmBlB,oBAnBkB,EAoBlB,cApBkB,EAqBlB,WArBkB,EAsBlB,WAtBkB,EAuBlB,eAvBkB,EAwBlB,QAxBkB,EAyBlB,UAzBkB,EA0BlB,cA1BkB,EA2BlB,qBA3BkB,EA4BlB,cA5BkB,EA6BlB,SA7BkB,EA8BlB,YA9BkB,EA+BlB,UA/BkB,EAgClB,mBAhCkB,EAiClB,iBAjCkB,EAkClB,aAlCkB,EAmClB,sBAnCkB,EAoClB,gBApCkB,EAqClB,eArCkB,EAsClB,eAtCkB,EAuClB,iBAvCkB,EAwClB,WAxCkB,EAyClB,gBAzCkB,EA0ClB,gBA1CkB,EA2ClB,mBA3CkB,EA4ClB,YA5CkB,EA6ClB,iBA7CkB,EA8ClB,mBA9CkB,EA+ClB,uBA/CkB,EAgDlB,OAhDkB,EAiDlB,uBAjDkB,EAkDlB,aAlDkB,EAmDlB,sBAnDkB,EAoDlB,eApDkB,EAqDlB,4BArDkB,EAsDlB,kBAtDkB,EAuDlB,sBAvDkB,EAwDlB,mBAxDkB,EAyDlB,sBAzDkB,EAApB;;AA4DA,IAAMc,qCAAqC,GAA6CD,cAAxF;AACA,AAAO,IAAME,UAAU,gBAAG,IAAI7J,GAAJ,CAAQ4J,qCAAR,CAAnB;AAGP,IAAME,kBAAkB,0BACnBd,oCADmB,EAEnBF,6CAFmB,GAGtB,gBAHsB,EAItB,cAJsB,EAKtB,eALsB,EAMtB,UANsB,EAOtB,QAPsB,EAQtB,SARsB,EAStB,aATsB,EAUtB,SAVsB,EAWtB,WAXsB,EAYtB,YAZsB,EAatB,sBAbsB,EActB,eAdsB,EAetB,UAfsB,EAgBtB,sBAhBsB,EAiBtB,gBAjBsB,EAkBtB,kBAlBsB,EAmBtB,oBAnBsB,EAAxB;;AAsBA,IAAMiB,yCAAyC,GAAiDD,kBAAhG;AACA,AAAO,IAAME,cAAc,gBAAG,IAAIhK,GAAJ,CAAQ+J,yCAAR,CAAvB;AAEP,AAAO,IAAME,QAAQ,gBAAG,IAAIjK,GAAJ,CAAQ,CAC9B,iBAD8B,EAE9B,cAF8B,EAG9B,WAH8B,EAI9B,WAJ8B,EAK9B,SAL8B,EAM9B,SAN8B,EAO9B,WAP8B,EAQ9B,SAR8B,EAS9B,iBAT8B,EAU9B,aAV8B,EAW9B,MAX8B,EAY9B,UAZ8B,EAa9B,WAb8B,EAc9B,MAd8B,EAe9B,IAf8B,EAgB9B,WAhB8B,EAiB9B,YAjB8B,EAkB9B,UAlB8B,EAmB9B,QAnB8B,EAoB9B,MApB8B,EAqB9B,MArB8B,EAsB9B,QAtB8B,EAuB9B,OAvB8B,EAwB9B,SAxB8B,EAyB9B,kBAzB8B,EA0B9B,oBA1B8B,EA2B9B,qBA3B8B,EA4B9B,WA5B8B,EA6B9B,YA7B8B,EA8B9B,SA9B8B,EA+B9B,SA/B8B,EAgC9B,QAhC8B,EAiC9B,UAjC8B,EAkC9B,SAlC8B,EAmC9B,WAnC8B,EAoC9B,UApC8B,EAqC9B,SArC8B,EAsC9B,eAtC8B,EAuC9B,eAvC8B,EAwC9B,QAxC8B,EAyC9B,WAzC8B,EA0C9B,aA1C8B,EA2C9B,YA3C8B,EA4C9B,aA5C8B,EA6C9B,YA7C8B,EA8C9B,aA9C8B,EA+C9B,QA/C8B,EAgD9B,aAhD8B,EAiD9B,cAjD8B,EAkD9B,cAlD8B,EAmD9B,aAnD8B,EAoD9B,YApD8B,EAqD9B,aArD8B,EAsD9B,WAtD8B,EAuD9B,eAvD8B,EAwD9B,eAxD8B,EAyD9B,aAzD8B,EA0D9B,iBA1D8B,EA2D9B,qBA3D8B,EA4D9B,sBA5D8B,EA6D9B,gBA7D8B,EA8D9B,gBA9D8B,EA+D9B,eA/D8B,EAgE9B,cAhE8B,EAiE9B,UAjE8B,EAkE9B,eAlE8B,EAmE9B,YAnE8B,EAoE9B,aApE8B,EAqE9B,cArE8B,EAsE9B,UAtE8B,EAuE9B,SAvE8B,EAwE9B,kBAxE8B,EAyE9B,gBAzE8B,EA0E9B,sBA1E8B,EA2E9B,iBA3E8B,EA4E9B,UA5E8B,CAAR,CAAjB;AA+EP,AAAO,IAAMkK,eAAe,GAAG,SAAlBA,eAAkB;AAC7B,MAAMC,WAAW,GAAG,IAAInK,GAAJ,CAAgB,EAAhB,CAApB;;oCADoCoK;AAAAA,IAAAA;;;AAEpC,gCAAkBA,SAAlB;AAAK,QAAMtH,GAAG,iBAAT;AAAwBA,IAAAA,GAAG,CAACuH,OAAJ,CAAY,UAACC,EAAD;AAAA,aAAQH,WAAW,CAACI,GAAZ,CAAgBD,EAAhB,CAAR;AAAA,KAAZ;AAA7B;;AAEA,SAAO,UAACzJ,KAAD;AACL,QAAM2J,SAAS,GAAQ,EAAvB;;AACA,SAAK,IAAMvI,GAAX,IAAkBpB,KAAlB;AAAyB,UAAIsJ,WAAW,CAAC1H,GAAZ,CAAgBR,GAAhB,CAAJ,EAA0BuI,SAAS,CAACvI,GAAD,CAAT,GAAiBpB,KAAK,CAACoB,GAAD,CAAtB;AAAnD;;AACA,WAAOuI,SAAP;AACD,GAJD;AAKD,CATM;;AC3XP,IAAMC,MAAM,GAAG,SAATA,MAAS,CAAI9J,SAAJ,EAAiC+G,oBAAjC;MAAiCA;AAAAA,IAAAA,uBAAuB,8BAACgD,CAAD;AAAA,aAAeA,CAAf;AAAA;;;AACrE,MAAMC,gBAAgB,GAAGnD,oBAAoB,CAC3C7G,SAD2C,EAE3C,UAACE,KAAD;AAAA,WAAWA,KAAX;AAAA,GAF2C,EAG3C6G,oBAH2C,CAA7C;;AAMAiD,EAAAA,gBAAgB,CAACC,KAAjB,GAAyB,UAAOC,SAAP;AACvB,QAAMpD,cAAc,GAAG,SAAjBA,cAAiB,CAAC5G,KAAD;AAAA,0BAClBA,KADkB,EAEjBgK,SAAS,YAAYC,QAArB,GAAgCD,SAAS,CAAChK,KAAD,CAAzC,GAAmDgK,SAFlC;AAAA,KAAvB;;AAIA,WAAOrD,oBAAoB,CAAU7G,SAAV,EAAqB8G,cAArB,EAAqCC,oBAArC,CAA3B;AACD,GAND;;AAOA,SAAOiD,gBAAP;AACD,CAfD;;AAiBAF,MAAM,CAACM,IAAP,gBAAcN,MAAM,CAACM,IAAD,eAAOb,eAAe,CAACjB,SAAD,EAAYgB,QAAZ,CAAtB,CAApB;AACAQ,MAAM,CAACO,IAAP,gBAAcP,MAAM,CAACO,IAAD,eAAOd,eAAe,CAACd,SAAD,EAAYa,QAAZ,CAAtB,CAApB;AACAQ,MAAM,CAACQ,KAAP,gBAAeR,MAAM,CAACQ,KAAD,eAAQf,eAAe,CAACX,UAAD,EAAaU,QAAb,CAAvB,CAArB;AACAQ,MAAM,CAACS,UAAP,gBAAoBT,MAAM,CAACS,UAAD,eAAahB,eAAe,CAACR,SAAD,EAAYO,QAAZ,CAA5B,CAA1B;AACAQ,MAAM,CAACU,QAAP,gBAAkBV,MAAM,CAACU,QAAD,eAAWjB,eAAe,CAACR,SAAD,EAAYO,QAAZ,CAA1B,CAAxB;AACAQ,MAAM,CAACW,WAAP,gBAAqBX,MAAM,CAACW,WAAD,eAAclB,eAAe,CAACR,SAAD,EAAYO,QAAZ,CAA7B,CAA3B;AACAQ,MAAM,CAACY,gBAAP,gBAA0BZ,MAAM,CAACY,gBAAD,eAAmBnB,eAAe,CAACF,cAAD,EAAiBC,QAAjB,CAAlC,CAAhC;AACAQ,MAAM,CAACa,SAAP,gBAAmBb,MAAM,CAACa,SAAD,eAAYpB,eAAe,CAACL,UAAD,EAAaZ,SAAb,EAAwBG,SAAxB,EAAmCa,QAAnC,CAA3B,CAAzB;AACAQ,MAAM,CAACc,YAAP,gBAAsBd,MAAM,CAACc,YAAD,eAAerB,eAAe,CAACjB,SAAD,EAAYgB,QAAZ,CAA9B,CAA5B;AAEA,IAEauB,WAAW,gBAAGtB,eAAe,CACxCjB,SADwC,EAExCG,SAFwC,EAGxCG,UAHwC,EAIxCG,SAJwC,EAKxCM,cALwC,EAMxCH,UANwC,EAOxCI,QAPwC,CAAnC;;;;;"}